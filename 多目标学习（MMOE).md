[toc]

#### MMOE

- 多目标学习的情况在推荐系统中很常见，但预测的质量常常容易受到目标之间关系的影响，针对某目标的优化与任务间的关系需要权衡。
- 最基础的多任务学习方案就是用样本的loss加权，本质上这里没有多目标建模，而是将不同的目标转化为同一个。
  - 这里的任务可以理解为推荐系统中的排序模型，也就是输入同时有用户和物品，输出是预测价值（预测点击可能性，购买可能性，分享可能性等）。在线上serving的时候真实的排序还需要一个公式来融合多个目标的预测值，这里的预测越准确越好，但是最后serving需要一个公式来决策（如CTR*log(1+时长)）。
- 

![image-20210308121959015](https://i.loli.net/2021/03/17/TQfB6PtmgUVaoYR.png)

图片显示的结构清晰而容易理解，这里的Expert可以理解为一个Feature。要达到非常好的效果，其实加入许多复杂的构件和参数可以实现，但这里的目标是在参数量基本不变的情况下完成。



#### ESMM

- 针对任务依赖，如电商中转换这个行为只有在点击之后才会发生，CVR这个目标就是依赖于CTR的，这导致CTR任务在训练时只能利用点击后的样本，这导致预测时产生了偏差，也减少了样本
- 传统的优化转化目标中，只优化点击后的这一块，不把点击率*转化率（CTCVR）作为一个整体，这里可以每个模块用一个模型输出，优化时同时优化点击率，点击率\*转化率两个目标，后一个目标信号向前传输。这样CVR目标也可以在所有曝光数据上训练
- <img src="https://i.loli.net/2021/04/05/EkigUVmMRxdr93q.png" alt="image-20210404131304912" style="zoom: 80%;" />

#### ESM2​

- ESMM只是缓解了数据稀疏的问题，但总体而言，产生订单的样本还是太少了
- 阿里的场景中，有三个层次，一个是曝光到点击，一个是点击到决定性行为（购物车和收藏），一个是购买。场景可以用图结构表示，同时优化点击率（CTR），决定性行为发生率（CTAVR），购买发生率（CTCVR）三项指标，对每一个指标用交叉熵loss优化。
- ![image-20210404132942143](https://i.loli.net/2021/04/05/ozbOXyujdm8VpIc.png)

  



#### PLE

- PLE = Progressive Layered Extraction，是一个用来解决多任务学习中跷跷板现象的模型，和MMOE一样，也有单级和多级的具体实现。

- ![image-20210331093725960](https://i.loli.net/2021/03/31/PpZjwyeu9O6C4IY.png)

  （这里蓝色的表示共享的模块，红绿色的表示不共享的模块或结构）

- 这里关心VCR和VTR两个任务，分别是观看完成度和是否是一次有效观看，这两个任务可以说关系比较密切，但在业务中也因为业务逻辑有比较复杂的关系。

- 这里，MMOE有两个缺点。首先，MMOE的所有Experts被所有任务共享，可能无法表达任务间的复杂关系。其次，不同Experts间没有交互

- CGC即每个任务有共享的Expert和独有的Expert，用门控组件组合独有Expert与共享的Expert

- 实验发现MMOE的Gate model中，各个任务利用的各Experts的比例相近，而CGC中这个比例是参差不一的





#### Youtub：Recommending What Video to Watch Next: A Multitask Ranking System

#### ![img](https://i.loli.net/2021/03/17/WPk8sjf5p7LOdH1.jpg)

- 利用MMOE来处理多目标问题，将目标分为两大类：Engagement objectives（预测点击和观看，二分类点击，回归预测观看时长），Satisfaction objectives（预测反馈，二分类是否点赞，回归评分）
- 这个模型是pointwise的（相对于pairwise和listwise的概念），即只以（用户，物品）为输入打分，近似于回归问题，目标是所有正样本的打分高于负样本打分

